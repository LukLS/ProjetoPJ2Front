{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\franc\\\\Desktop\\\\Projetos\\\\ProjetoAdvocaciaFront\\\\src\\\\components\\\\AuthContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useEffect, useState } from 'react';\nimport axios from \"axios\";\nimport { api } from \"../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nconst AuthProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [user, setIsAuthenticated] = useState(null);\n  useEffect(() => {\n    const logout = async () => {\n      const storageUser = localStorage.setItem('token');\n      const storageToken = localStorage.setItem('user');\n      if (storageUser && storageToken) {\n        setIsAuthenticated(storageUser);\n      }\n    };\n    logout();\n  }, []);\n  const signIn = async (email, senha) => {\n    const response = await axios.post('http://localhost:8080/api/login', {\n      login: this.state.login,\n      senha: this.state.senha\n    });\n    if (response.data.error) {\n      alert(response.data.error);\n    } else {\n      setIsAuthenticated(response.data.user);\n      const {\n        token\n      } = response.data;\n      api.defaults.hearders.common[\"Authorization\"] = `Bearer ${responde.data.token}`;\n      localStorage.setItem('token', token);\n      localStorage.setItem('user', response.data.user);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      signed: !!user,\n      signIn\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n};\n_s(AuthProvider, \"9KviyDeG6pK1QQmKwsempsTDLtU=\");\n_c = AuthProvider;\nexport { AuthContext, AuthProvider };\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useState","axios","api","jsxDEV","_jsxDEV","AuthContext","AuthProvider","_ref","_s","children","user","setIsAuthenticated","logout","storageUser","localStorage","setItem","storageToken","signIn","email","senha","response","post","login","state","data","error","alert","token","defaults","hearders","common","responde","Provider","value","signed","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/franc/Desktop/Projetos/ProjetoAdvocaciaFront/src/components/AuthContext.js"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\r\nimport axios from \"axios\";\r\nimport { api } from \"../services/api\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nconst AuthProvider = ({ children }) => {\r\n    const [user, setIsAuthenticated] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const logout = async() => {\r\n        const storageUser = localStorage.setItem('token');\r\n        const storageToken = localStorage.setItem('user');\r\n        \r\n        if(storageUser && storageToken){\r\n            setIsAuthenticated(storageUser)\r\n        }\r\n    };\r\n    logout();\r\n    },[])\r\n\r\n    const signIn = async(email, senha) => {\r\n        const response = await axios.post('http://localhost:8080/api/login', {\r\n            login: this.state.login,\r\n            senha: this.state.senha,\r\n        });\r\n\r\n        if(response.data.error){\r\n            alert(response.data.error)\r\n        }else{\r\n        setIsAuthenticated(response.data.user);\r\n        const {token} = response.data\r\n        api.defaults.hearders.common[\r\n            \"Authorization\"\r\n        ]  = `Bearer ${responde.data.token}`;\r\n        localStorage.setItem('token', token);\r\n        localStorage.setItem('user', response.data.user);\r\n        }\r\n \r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider\r\n         value={{ user, signed:!!user, signIn}}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport { AuthContext, AuthProvider };\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACjE,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,GAAG,QAAQ,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtC,MAAMC,WAAW,gBAAGP,aAAa,CAAC,CAAC;AAEnC,MAAMQ,YAAY,GAAGC,IAAA,IAAkB;EAAAC,EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC,GAAAF,IAAA;EAC9B,MAAM,CAACG,IAAI,EAAEC,kBAAkB,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAEjDD,SAAS,CAAC,MAAM;IACZ,MAAMa,MAAM,GAAG,MAAAA,CAAA,KAAW;MAC1B,MAAMC,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MACjD,MAAMC,YAAY,GAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;MAEjD,IAAGF,WAAW,IAAIG,YAAY,EAAC;QAC3BL,kBAAkB,CAACE,WAAW,CAAC;MACnC;IACJ,CAAC;IACDD,MAAM,CAAC,CAAC;EACR,CAAC,EAAC,EAAE,CAAC;EAEL,MAAMK,MAAM,GAAG,MAAAA,CAAMC,KAAK,EAAEC,KAAK,KAAK;IAClC,MAAMC,QAAQ,GAAG,MAAMnB,KAAK,CAACoB,IAAI,CAAC,iCAAiC,EAAE;MACjEC,KAAK,EAAE,IAAI,CAACC,KAAK,CAACD,KAAK;MACvBH,KAAK,EAAE,IAAI,CAACI,KAAK,CAACJ;IACtB,CAAC,CAAC;IAEF,IAAGC,QAAQ,CAACI,IAAI,CAACC,KAAK,EAAC;MACnBC,KAAK,CAACN,QAAQ,CAACI,IAAI,CAACC,KAAK,CAAC;IAC9B,CAAC,MAAI;MACLd,kBAAkB,CAACS,QAAQ,CAACI,IAAI,CAACd,IAAI,CAAC;MACtC,MAAM;QAACiB;MAAK,CAAC,GAAGP,QAAQ,CAACI,IAAI;MAC7BtB,GAAG,CAAC0B,QAAQ,CAACC,QAAQ,CAACC,MAAM,CACxB,eAAe,CAClB,GAAK,UAASC,QAAQ,CAACP,IAAI,CAACG,KAAM,EAAC;MACpCb,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEY,KAAK,CAAC;MACpCb,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEK,QAAQ,CAACI,IAAI,CAACd,IAAI,CAAC;IAChD;EAEJ,CAAC;EAED,oBACIN,OAAA,CAACC,WAAW,CAAC2B,QAAQ;IACpBC,KAAK,EAAE;MAAEvB,IAAI;MAAEwB,MAAM,EAAC,CAAC,CAACxB,IAAI;MAAEO;IAAM,CAAE;IAAAR,QAAA,EAClCA;EAAQ;IAAA0B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC;AAE/B,CAAC;AAAC9B,EAAA,CAzCIF,YAAY;AAAAiC,EAAA,GAAZjC,YAAY;AA2ClB,SAASD,WAAW,EAAEC,YAAY;AAAG,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}